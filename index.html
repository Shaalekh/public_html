<!doctype html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7X78EMCP1Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7X78EMCP1Z');
</script>
        <meta charset="UTF-8" />
        <meta name="keywords" content="qrsr, qrcode file share,file transfer, qrsr file transfer" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>QRSR</title>
        <link rel="icon" type="image/png" href="qr-code.256x256.png" />
        <link rel="stylesheet" href="style.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <meta property="og:title" content="QRSR.com - Easy sharing" />
        <meta
            property="og:description"
            content="A tool to make file transfer from mobile to pc easy through QRcodes." />
        <meta property="og:image" content="https://qrsr.co.in/logo1.jpg" />
        <meta property="og:url" content="https://qrsr.co.im" />
        <meta property="og:type" content="website" />
        <script>
            // Function to clear all cookies
            function clearCookies() {
                const cookies = document.cookie.split(";");

                for (let cookie of cookies) {
                    const eqPos = cookie.indexOf("=");
                    const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;

                    // Set cookie expiration to the past
                    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`;
                }
            }

            // Function to clear all storage (localStorage and sessionStorage)
            function clearStorage() {
                localStorage.clear();
                sessionStorage.clear();
            }

            // Clear cookies and storage before the page loads fully
            clearCookies();
            clearStorage();
        </script>
        <script>
    window.addEventListener('mousemove', function(e) {
      var arr = [1, 0.9, 0.8, 0.5, 0.2];

      arr.forEach(function(i) {
        var x = (1 - i) * 75;
        var star = document.createElement('div');

        star.className = 'star';
        star.style.top = e.clientY + Math.round(Math.random() * x - x / 2) + 'px';
        star.style.left = e.clientX + Math.round(Math.random() * x - x / 2) + 'px';

        document.body.appendChild(star);

        window.setTimeout(function() {
          document.body.removeChild(star);
        }, Math.round(Math.random() * i * 600));
      });
    }, false);
</script>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <h4><a href="#" id="bar">  <i class="fa fa-home"></i> Home</a> <a href="mtop/index.html" id="login"> Phone to PC</a> </h4>
        <div id="constellation"></div>
        <h1 id="responsive"></h1>
        <div id="main">
            <form id="uploadForm" enctype="multipart/form-data">
                <input class="ia" type="file" name="fileToUpload" id="fileToUpload" />
                <div id="result"></div>
                <div class="qr-container" id="qrContainer"></div>
                <input class="ib" type="submit" value="Upload File" name="submit" />
            </form>

            <!-- Progress bar container -->
            <div id="progressContainer" style="display: none">
                <div id="progressBar"></div>
            </div>
        </div>

        <footer>
            <ul class="nav">
                <li class="a">
                    <a class="fanchor" href="#"> Home </a>
                </li>
                <li class="a">
                    <a class="fanchor" href="#">Notifications </a>
                </li>
                <li class="a">
                    <a class="fanchor" href="#">About us </a>
                </li>
                <li class="a">
                    <a class="fanchor" href="#"> Contact us </a>
                </li>
                <li class="a">
                    <a class="fanchor" href="topm/index.html">Mobile to PC </a>
                </li>
            </ul>
            <hr width="80%" style="margin-left: auto; margin-right: auto; margin-top: 1px;" />
            <cite>
                &copy; Copyright 1999-2023 by Refsnes Data.
            </cite>
            <cite style="text-align:center; margin-bottom: 0px !important; padding: 0px !important;" >A product of DevAl Corporations Limited.</cite>
            
           
        </footer>

        <script src="responsive.js" ></script>
        <script>
            // Handle form submission using AJAX
            document.getElementById("uploadForm").addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent normal form submission

                var formData = new FormData(this);
                var xhr = new XMLHttpRequest();

                // Reset the result and QR container
                document.getElementById("result").innerHTML = "";
                document.getElementById("qrContainer").innerHTML = "";
                document.getElementById("progressBar").style.width = "0%";

                // Show progress bar
                document.getElementById("progressContainer").style.display = "block";

                // Listen for the progress event
                xhr.upload.addEventListener(
                    "progress",
                    function (e) {
                        if (e.lengthComputable) {
                            var percentComplete = (e.loaded / e.total) * 100;
                            document.getElementById("progressBar").style.width = percentComplete + "%";
                        }
                    },
                    false
                );

                xhr.open("POST", "upload.php", true);

                xhr.onload = function () {
                    if (xhr.status == 200) {
                        var response = JSON.parse(xhr.responseText);

                        if (response.error) {
                            document.getElementById("result").innerHTML =
                                `<p style="color: red;">${response.error}</p>`;
                            document.getElementById("progressContainer").style.display = "none";
                        } else {
                            // Show the file download link
                            document.getElementById("result").innerHTML =
                                `<p style="color:white;font-family: 'Geist Moto',monospace;margin-left:auto;margin-right:auto;text-align: center;">File uploaded successfully! âœ…</p>`;

                            // Show the QR code
                            var qrCodeUrl = response.qrCodeUrl;
                            document.getElementById("qrContainer").innerHTML = `
                            <h3 style="color:white;font-family:'geist moto',monospace;margin-left:auto;margin-right:auto">Your QR Code is ready:</h3>
                            <img src="${qrCodeUrl}" alt="QR Code">
                        `;
                        }

                        // Hide the progress bar once the upload is complete
                        document.getElementById("progressContainer").style.display = "none";
                    } else {
                        document.getElementById("result").innerHTML =
                            "<p style='color: red;'>Error uploading file.</p>";
                        document.getElementById("progressContainer").style.display = "none";
                    }
                };

                xhr.send(formData); // Send the file data
            });
        </script>
    </body>
</html>

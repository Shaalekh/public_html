<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="keywords" content="qrsr, qrcode file share,file transfer, qrsr file transfer" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>QRSR</title>
        <link rel="icon" type="image/png" href="favicon-32x32.png" />
        <link rel="stylesheet" href="style.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <meta property="og:title" content="QRSR.com - Easy sharing">
<meta property="og:description" content="A tool to make file transfer from mobile to pc easy through QRcodes.">
<meta property="og:image" content="https://qrsr.co.in/logo1.jpg">
<meta property="og:url" content="https://qrsr.co.im">
<meta property="og:type" content="website">

    </head>
    <body>
        <h1>Quick Response Share Recieve</h1>
        <div id="main">
            <form id="uploadForm" enctype="multipart/form-data">
                <input class="ia" type="file" name="fileToUpload" id="fileToUpload" />
                <div id="result"></div>
                <div class="qr-container" id="qrContainer"></div>
                <input class="ib" type="submit" value="Upload File" name="submit" />
            </form>

            <!-- Progress bar container -->
            <div id="progressContainer" style="display: none">
                <div id="progressBar"></div>
            </div>
        </div>

            <footer>
        <ul class="nav">
            <li class="a">
                <a class="fanchor" href="#"> Home </a>
            </li>
            <li class="a">
                <a class="fanchor" href="#">Notifications
                </a>
            </li>
            <li class="a">
                <a class="fanchor" href="#">About us </a>
            </li>
            <li class="a">
                <a class="fanchor" href="#"> Contact us </a>
            </li>
            <li class="a">
                <a class="fanchor" href="#">Special Forces Branch </a>
            </li>
        </ul>
        <hr width="80%" />
        <cite>
            &copy; Copyright 1999-2023 by Refsnes Data. <br />
            &reg; All Rights Reserved.</cite>
    </footer>

        <script>
            // Handle form submission using AJAX
            document.getElementById("uploadForm").addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent normal form submission

                var formData = new FormData(this);
                var xhr = new XMLHttpRequest();

                // Reset the result and QR container
                document.getElementById("result").innerHTML = "";
                document.getElementById("qrContainer").innerHTML = "";
                document.getElementById("progressBar").style.width = "0%";

                // Show progress bar
                document.getElementById("progressContainer").style.display = "block";

                // Listen for the progress event
                xhr.upload.addEventListener(
                    "progress",
                    function (e) {
                        if (e.lengthComputable) {
                            var percentComplete = (e.loaded / e.total) * 100;
                            document.getElementById("progressBar").style.width = percentComplete + "%";
                        }
                    },
                    false
                );

                xhr.open("POST", "upload.php", true);

                xhr.onload = function () {
                    if (xhr.status == 200) {
                        var response = JSON.parse(xhr.responseText);

                        if (response.error) {
                            document.getElementById("result").innerHTML =
                                `<p style="color: red;">${response.error}</p>`;
                            document.getElementById("progressContainer").style.display = "none";
                        } else {
                            // Show the file download link
                            document.getElementById("result").innerHTML =
                                `<p style="color:white;font-family: 'Geist Moto',monospace;margin-left:auto;margin-right:auto;text-align: center;">File uploaded successfully! âœ…</p>`;

                            // Show the QR code
                            var qrCodeUrl = response.qrCodeUrl;
                            document.getElementById("qrContainer").innerHTML = `
                            <h3 style="color:white;font-family:'geist moto',monospace;margin-left:auto;margin-right:auto">Your QR Code is ready:</h3>
                            <img src="${qrCodeUrl}" alt="QR Code">
                        `;
                        }

                        // Hide the progress bar once the upload is complete
                        document.getElementById("progressContainer").style.display = "none";
                    } else {
                        document.getElementById("result").innerHTML =
                            "<p style='color: red;'>Error uploading file.</p>";
                        document.getElementById("progressContainer").style.display = "none";
                    }
                };

                xhr.send(formData); // Send the file data
            });
        </script>
    </body>
</html>
